{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "AllowedHosts": "*",
  "ForwardAuth": {
    "CookieOptions": {
      "//": "Cookie options are used for the cookie signin scheme - so apply to all IDPs",
      "CookieName": "my_forward_auth_cookie",
      "SameSiteMode": "Lax",
      "ExpiryTimeSpan": "2:30:00",
      "SlidingExpiration": false,
      "RequiredClaimValueChecks": [
        {
          "//": "Claim value checks can be used to check for specific claim values in the login callback (e.g. roles)",
          "ClaimType": "sub",
          "ClaimValue": 2
        }
      ]
    },
    "OptionalDefaultProvider": "duende",
    "OptionalInteractiveChallengeRedirectOverrideUrl": "https://localhost:8082/p/welcome",
    "Providers": [
      {
        "//": "This is the IDP config, multiple IDPs can be added but only one can be the default",
        "Name": "Duende",
        "DisplayName": "Duende (IdentityServer)",
        "OptionalBaseReturnUrl": "https://localhost:8082",
        "OpenIdOptions": {
          "Authority": "https://demo.duendesoftware.com/",
          "ClientId": "interactive.confidential",
          "ClientSecret": "secret",
          "ResponseType": "code",
          "Scopes": ["openid", "profile", "offline_access"],
          "UsePkce": true
        },
        "ClaimTransformationOptions": {
          "Transformations": [
            {
              "//": "These differ from the Claim mappings below as these ones are IDP specific. The intention is to map",
              "///": "all IDPs to the same set of claim types so the mappings below act on a consistent set",
              "////": "Remove the 1 to enable the examples. Options are: 'Map', 'MapAndRemoveOrigin', 'Remove'",
              "TransformationType": "Map1",
              "OriginClaimType": "given_name",
              "TargetClaimType": "first_name"
            },
            {
              "TransformationType": "MapAndRemoveOrigin1",
              "OriginClaimType": "given_name",
              "TargetClaimType": "first_name"
            },
            {
              "TransformationType": "Remove1",
              "OriginClaimType": "given_name"
            }
          ]
        }
      }
    ],
    "ClaimToHeaderMappings": {
      "//": "These are used to map from claim -> header keys for all providers",
      "Mappings": {
        "sub": "X-Auth-User-Id",
        "name": "X-Auth-User-Name"
      },
      "MissingClaimAction": "Warn"
    },
    "ClaimToUserInfoMappings": {
      "//": "These are used to map from claim -> user info endpoint values for all providers",
      "Mappings": {
        "sub" : "userId",
        "name" : "name"
      },
      "MissingClaimAction": "Warn"
    }
  }
}
